{% set colorMap = {
  gray: {
    bgClass: 'bg-gray-translucent',
    triangleClass: 'text-gray-translucent'
  },
  orange: {
    bgClass: 'bg-orange-translucent',
    triangleClass: 'text-orange-translucent'
  },
  pink: {
    bgClass: 'bg-pink-translucent',
    triangleClass: 'text-pink-translucent'
  },
  purple: {
    bgClass: 'bg-purple-translucent',
    triangleClass: 'text-purple-translucent'
  }
} %}

{% macro speechBubble(text, author, side, color) %}
  {% set colorDefinition = colorMap[color] %}
  <div >
    <blockquote class="p-8 text-center text-white {{ colorDefinition.bgClass }}">
      <p class="mb-4 text-xl font-extralight">{{ text }}</p>
      <footer>
        <cite class="text-sm not-italic">{{ author }}</cite>
      </footer>
    </blockquote>
    {{ triangle(side, colorDefinition.triangleClass) }}
  </div>
{% endmacro %}

{% macro triangle(side, triangleClass) %}
  {% set marginClass = 'ml-8' if side === 'left' else 'mr-8' %}
  {% set points = '0 0 0 10 10 0' if side === 'left' else '0 0 10 0 10 10' %}
  {% set justifyClass = 'justify-start' if side === 'left' else 'justify-end' %}
  <div class="flex {{ justifyClass }} {{ triangleClass }}">
    <svg
      aria-hidden="true"
      viewBox="0 0 10 10"
      class="h-8 fill-current {{ marginClass }}"
    >
      <polygon points="{{ points }}"></polygon>
    </svg>
  </div>
{% endmacro %}
